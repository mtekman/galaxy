{"version":3,"sources":["mvc/collection/base-creator.js"],"names":["define","CollectionCreatorMixin","what","clear","_validationWarning","VALIDATION_CLASS","add","$","this","focus","select","addClass","_changeHideOriginals","ev","hideOriginals","prop","_changeName","_getName","_nameCheckForEnter","_clickCreate","keyCode","blocking","_","escape","val","_clickMoreHelp","stopPropagation","hide","_clickLessHelp","removeClass","show","_toggleHelp","toggleClass","toggle","_showAlert","message","alertClass","attr","_hideAlert","find","html","oncancel","call","name","_setUpCommonSettings","createList","attributes","each","footerSettings","defaultHideSourceItems","_renderFooter","speed","callback","self","$footer","empty","templates","footer","_creatorTemplates","property","selector","main","template","join"],"mappings":"aAAAA,UAAW,WAkIP,OACIC,wBA/HAA,mBAAAA,SAAyBC,EAAAC,GAEzBC,SAAAA,IACQC,EAAAA,KAAAA,EAAAA,oBAAmBC,IACnBJ,KAASK,EAAA,4BAITC,KAAKD,EAAE,oBAGVE,QACDC,UAEIR,GAFJA,EAGOA,GAAAM,KAAAD,EAAA,wBACEI,YAfb,sBADyBT,EAAAS,SACzB,uBAqBCC,qBAtBwB,SAAAC,GAqBrBL,KAAKM,cAAgBN,KAAKD,EAAE,mBAAmBQ,KAAK,YAOvDC,YA5BwB,SAAAH,GA2BrBL,KAAKJ,mBAAmB,SAAUI,KAAKS,aAMnCC,mBAAKC,SAALN,GACH,KAAAA,EAAAO,SAAAZ,KAAAa,UAlCoBb,KAAAW,gBAwCxBF,SAxCwB,WAuCrB,OAAOK,EAAEC,OAAOf,KAAKD,EAAE,oBAAoBiB,QAO3CC,eAAO,SAAcd,GACrBE,EAAAa,kBA/CqBlB,KAAAD,EAAA,cAAAI,SAAA,YAiDzBH,KAAAD,EAAA,cAAAoB,QAGIC,eAAO,SAAcC,GACrBhB,EAAAa,kBArDqBlB,KAAAD,EAAA,cAAAsB,YAAA,YAuDzBrB,KAAAD,EAAA,cAAAuB,QAGIC,YAAO,SAAAlB,GACPA,EAAAa,kBA3DqBlB,KAAAD,EAAA,cAAAyB,YAAA,YA2DrBxB,KAAKD,EAAE,cAAc0B,UAMrBC,WAAO,SAAAC,EAAPC,GACAA,EAAOA,GACFC,eAnEgB7B,KAAAD,EAAA,cAAAoB,OAyEzBnB,KAAAD,EAAA,kBACA+B,KAAY,QAAA,2BACH/B,SAAE6B,GACF7B,OA5EgBgC,KAAA,kBAuEhBC,KAAKL,IAUNG,WAAA,SAAAH,GACH3B,KAAAD,EAAA,cAAAuB,OAlFoBtB,KAAAD,EAAA,kBAAAoB,QAsFzBR,cAAc,SAAAN,GACV,mBAAWL,KAAKS,UACZT,KAAJiC,SAAWC,KAAAlC,OAKdW,aA7FwB,SAAAN,GAuFrB,IAAI8B,EAAOnC,KAAKS,WAQpB2B,EA/FyBpC,KAAAa,UA2FjBb,KAAKqC,WAAWF,GAKpBnC,KAAKM,mBAAgBgC,SAMrBF,qBAAc,SAAOE,GAGrBxB,KAAEyB,cAAUC,EAAgBC,yBAA6B,GAIrDC,cAAO,SAAAC,EAAAC,GACV,IAAAC,EAAA7C,KACD8C,EAAA9C,KAAAD,EAAA,WA/GqBgD,QAwGhBf,KAAKhC,KAAKgD,UAAUC,UAsB1B,OAZHC,EAAAA,KAAAA,KAAAA,eAAmB,SAAAC,EAAAC,GACfC,EAAQC,EAAAA,GAEA/C,KAAA,UAAAsC,EAAAM,MArHhB,mBAAAnD,KAAAiC,UA6GYjC,KAAKD,EAAE,sBAAsBuB,OAiBlCwB,GAlIXI,mBAuHYG,KAAMvC,EAAEwC,UAEA,8CACA,yDACA,+CACFC,KAAK","file":"../../../scripts/mvc/collection/base-creator.js","sourcesContent":["define([], function() {\n    /* For presentation-related functionality shared across collection creators.\n   Particularily overlapping functionality related to name processing and help.\n*/\n    var CollectionCreatorMixin = {\n        /** add (or clear if clear is truthy) a validation warning to the DOM element described in what */\n        _validationWarning: function(what, clear) {\n            var VALIDATION_CLASS = \"validation-warning\";\n            if (what === \"name\") {\n                what = this.$(\".collection-name\").add(\n                    this.$(\".collection-name-prompt\")\n                );\n                this.$(\".collection-name\")\n                    .focus()\n                    .select();\n            }\n            if (clear) {\n                what = what || this.$(\".\" + VALIDATION_CLASS);\n                what.removeClass(VALIDATION_CLASS);\n            } else {\n                what.addClass(VALIDATION_CLASS);\n            }\n        },\n\n        _changeHideOriginals: function(ev) {\n            this.hideOriginals = this.$(\".hide-originals\").prop(\"checked\");\n        },\n\n        // ........................................................................ footer\n        /** handle a collection name change */\n        _changeName: function(ev) {\n            this._validationWarning(\"name\", !!this._getName());\n        },\n\n        /** check for enter key press when in the collection name and submit */\n        _nameCheckForEnter: function(ev) {\n            if (ev.keyCode === 13 && !this.blocking) {\n                this._clickCreate();\n            }\n        },\n\n        /** get the current collection name */\n        _getName: function() {\n            return _.escape(this.$(\".collection-name\").val());\n        },\n\n        // ........................................................................ header\n        /** expand help */\n        _clickMoreHelp: function(ev) {\n            ev.stopPropagation();\n            this.$(\".main-help\").addClass(\"expanded\");\n            this.$(\".more-help\").hide();\n        },\n        /** collapse help */\n        _clickLessHelp: function(ev) {\n            ev.stopPropagation();\n            this.$(\".main-help\").removeClass(\"expanded\");\n            this.$(\".more-help\").show();\n        },\n        /** toggle help */\n        _toggleHelp: function(ev) {\n            ev.stopPropagation();\n            this.$(\".main-help\").toggleClass(\"expanded\");\n            this.$(\".more-help\").toggle();\n        },\n\n        /** show an alert on the top of the interface containing message (alertClass is bootstrap's alert-*) */\n        _showAlert: function(message, alertClass) {\n            alertClass = alertClass || \"alert-danger\";\n            this.$(\".main-help\").hide();\n            this.$(\".header .alert\")\n                .attr(\"class\", \"alert alert-dismissable\")\n                .addClass(alertClass)\n                .show()\n                .find(\".alert-message\")\n                .html(message);\n        },\n        /** hide the alerts at the top */\n        _hideAlert: function(message) {\n            this.$(\".main-help\").show();\n            this.$(\".header .alert\").hide();\n        },\n\n        _cancelCreate: function(ev) {\n            if (typeof this.oncancel === \"function\") {\n                this.oncancel.call(this);\n            }\n        },\n\n        /** attempt to create the current collection */\n        _clickCreate: function(ev) {\n            var name = this._getName();\n            if (!name) {\n                this._validationWarning(\"name\");\n            } else if (!this.blocking) {\n                this.createList(name);\n            }\n        },\n\n        _setUpCommonSettings: function(attributes) {\n            this.hideOriginals = attributes.defaultHideSourceItems || false;\n        },\n\n        /** render the footer, completion controls, and cancel controls */\n        _renderFooter: function(speed, callback) {\n            var self = this;\n            var $footer = this.$(\".footer\")\n                .empty()\n                .html(this.templates.footer());\n            _.each(this.footerSettings, function(property, selector) {\n                self.$(selector).prop(\"checked\", self[property]);\n            });\n            if (typeof this.oncancel === \"function\") {\n                this.$(\".cancel-create.btn\").show();\n            }\n            return $footer;\n        },\n\n        _creatorTemplates: {\n            main: _.template(\n                [\n                    '<div class=\"header flex-row no-flex\"></div>',\n                    '<div class=\"middle flex-row flex-row-container\"></div>',\n                    '<div class=\"footer flex-row no-flex\"></div>'\n                ].join(\"\")\n            )\n        }\n    };\n\n    //==============================================================================\n    return {\n        CollectionCreatorMixin: CollectionCreatorMixin\n    };\n});\n"]}