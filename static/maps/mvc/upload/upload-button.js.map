{"version":3,"sources":["mvc/upload/upload-button.js"],"names":["define","View","Backbone","extend","initialize","options","self","model","icon","tooltip","label","percentage","status","onunload","onclick","this","setElement","_template","$progress","$","listenTo","render","window","on","get","attributes","$el","e","title","removeClass","addClass","placement","css","width"],"mappings":"aACAA,UAAW,WA4DP,OAASC,KA7DbC,SAAAD,KAAAE,QACOC,WAAI,SAAWC,GACdJ,IAAOC,EAAAA,KACPE,KAAAA,MACQE,GAAJD,EAAAE,OACA,IAAKA,SACAF,OAEGG,KAAM,YACNC,QAAS,8CACTC,MAAO,YACPC,WAJe,EAKfC,OALe,GAMfC,SAAU,aACVC,QAAS,eACNT,IAAAA,GACXU,KAAKC,WAAWD,KAAKE,aACrBF,KAAKG,UAAYH,KAAKI,EAAE,iBACxBJ,KAAKK,SAASL,KAAKR,MAAO,SAAUQ,KAAKM,OAAQN,MACjDA,KAAKM,SACLF,EAAEG,QAAQC,GAAG,eAAgB,WACzB,OAAOjB,EAAKC,MAAMiB,IAAI,WAAflB,MAIfe,OAAQ,WACJ,IACIhB,EAAUU,KAAKR,MAAMkB,WACzBV,KAAKW,IAGGrB,IAAAA,SAEHI,GAAAA,QAAQ,SAAAkB,GACLC,EAAYrB,QAAMiB,KAN1Bf,SASKS,MACAW,KAAAA,MADLL,IAEKM,WArCmBC,UAAA,WA6C5BhB,KAAAG,UACAD,cACIa,SACI,gBASPA,SAAA,6BAzDLA,SA2DA,IAAe7B,EAAfW,QAAA,gBAAAP,EAAAO,QAjBaoB,KAAMC,MAAO5B,EAAQM,WAAa,OAI3CM,UAAW,WACP,MACI","file":"../../../scripts/mvc/upload/upload-button.js","sourcesContent":["/** View for upload/progress bar button */\ndefine([], function() {\n    var View = Backbone.View.extend({\n        initialize: function(options) {\n            var self = this;\n            this.model =\n                (options && options.model) ||\n                new Backbone.Model({\n                    icon: \"fa-upload\",\n                    tooltip: \"Download from URL or upload files from disk\",\n                    label: \"Load Data\",\n                    percentage: 0,\n                    status: \"\",\n                    onunload: function() {},\n                    onclick: function() {}\n                }).set(options);\n            this.setElement(this._template());\n            this.$progress = this.$(\".progress-bar\");\n            this.listenTo(this.model, \"change\", this.render, this);\n            this.render();\n            $(window).on(\"beforeunload\", function() {\n                return self.model.get(\"onunload\")();\n            });\n        },\n\n        render: function() {\n            var self = this;\n            var options = this.model.attributes;\n            this.$el\n                .off(\"click\")\n                .on(\"click\", function(e) {\n                    options.onclick(e);\n                })\n                .tooltip({\n                    title: this.model.get(\"tooltip\"),\n                    placement: \"bottom\"\n                });\n            this.$progress\n                .removeClass()\n                .addClass(\"progress-bar\")\n                .addClass(\"progress-bar-notransition\")\n                .addClass(\n                    options.status != \"\" && \"progress-bar-\" + options.status\n                )\n                .css({ width: options.percentage + \"%\" });\n        },\n\n        /** Template */\n        _template: function() {\n            return (\n                '<div class=\"upload-button\">' +\n                '<div class=\"progress\">' +\n                '<div class=\"progress-bar\"/>' +\n                '<a class=\"panel-header-button\" href=\"javascript:void(0)\" id=\"tool-panel-upload-button\">' +\n                '<span class=\"fa fa-upload\"/>' +\n                \"</a>\" +\n                \"</div>\" +\n                \"</div>\"\n            );\n        }\n    });\n    return { View: View };\n});\n"]}