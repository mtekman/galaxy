{"version":3,"sources":["mvc/ui/ui-tabs.js"],"names":["define","Utils","View","Backbone","extend","initialize","options","this","self","collection","model","onchange","visible","setElement","$","_template","$nav","$content","$el","on","hide","render","listenTo","_add","_remove","_change","_reset","id","get","addClass","first","removeClass","size","current","show","set","add","del","remove","delAll","reset","showTab","hideTab","title","placement","container","append","e","preventDefault","_template_tab","tooltip","tab_model","$tmpl","empty","attr","$href","find","icon"],"mappings":"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","file":"../../../scripts/mvc/ui/ui-tabs.js","sourcesContent":["/**\n *  Renders tabs e.g. used in the charts editor, behaves similar to repeat and section rendering\n */\ndefine([\"utils/utils\"], function(Utils) {\n    var View = Backbone.View.extend({\n        initialize: function(options) {\n            var self = this;\n            this.collection = new Backbone.Collection();\n            this.model =\n                (options && options.model) ||\n                new Backbone.Model({\n                    onchange: null,\n                    visible: true\n                }).set(options);\n            this.setElement($(this._template()));\n            this.$nav = this.$(\".tab-navigation\");\n            this.$content = this.$(\".tab-content\");\n            this.$el.on(\"click\", function() {\n                $(\".tooltip\").hide();\n            });\n            this.render();\n            this.listenTo(this.model, \"change\", this.render, this);\n            this.listenTo(this.collection, \"add\", this._add, this);\n            this.listenTo(this.collection, \"remove\", this._remove, this);\n            this.listenTo(this.collection, \"change\", this._change, this);\n            this.listenTo(this.collection, \"reset\", this._reset, this);\n            this.listenTo(\n                this.collection,\n                \"add remove reset\",\n                this.render,\n                this\n            );\n        },\n\n        render: function() {\n            var id = this.model.get(\"current\");\n            id = this.$(\"#\" + id).length > 0 ? id : this.first();\n            if (id) {\n                this.$nav.children().removeClass(\"active\");\n                this.$content.children().removeClass(\"active\");\n                this.$(\"#tab-\" + id).addClass(\"active\");\n                this.$(\"#\" + id).addClass(\"active\");\n            }\n            this.$el[this.model.get(\"visible\") ? \"fadeIn\" : \"fadeOut\"](\"fast\");\n            this.$nav[this.size() > 1 ? \"show\" : \"hide\"]();\n        },\n\n        /** Returns tab id for currently shown tab */\n        current: function() {\n            return this.model.get(\"current\");\n        },\n\n        /** Show tab view and highlight a tab by id */\n        show: function(id) {\n            if (id) {\n                this.model.set({ current: id, visible: true });\n                this.model.get(\"onchange\") && this.model.get(\"onchange\")(id);\n            }\n        },\n\n        /** Hide tab view */\n        hide: function() {\n            this.model.set(\"visible\", false);\n        },\n\n        /** Returns first tab */\n        first: function() {\n            var model = this.collection.first();\n            return model && model.id;\n        },\n\n        /** Returns current number of tabs */\n        size: function() {\n            return this.collection.length;\n        },\n\n        /** Adds a new tab */\n        add: function(options) {\n            this.collection.add(options);\n        },\n\n        /** Delete tab */\n        del: function(id) {\n            this.collection.remove(id);\n        },\n\n        /** Delete all tabs */\n        delAll: function() {\n            this.collection.reset();\n        },\n\n        /** Show tab */\n        showTab: function(id) {\n            this.collection.get(id).set(\"hidden\", false);\n        },\n\n        /** Hide tab */\n        hideTab: function(id) {\n            this.collection.get(id).set(\"hidden\", true);\n        },\n\n        /** Adds a new tab */\n        _add: function(tab_model) {\n            var self = this;\n            var options = tab_model.attributes;\n            this.$content.append(\n                $(\"<div/>\")\n                    .attr(\"id\", options.id)\n                    .addClass(\"tab-pane\")\n                    .append(options.$el)\n            );\n            this.$nav.append(\n                $(this._template_tab(options))\n                    .show()\n                    .tooltip({\n                        title: options.tooltip,\n                        placement: \"bottom\",\n                        container: self.$el\n                    })\n                    .on(\"click\", function(e) {\n                        e.preventDefault();\n                        self.show(options.id);\n                    })\n            );\n            if (this.size() == 1) {\n                this.show(options.id);\n            }\n        },\n\n        /** Delete tab */\n        _remove: function(tab_model) {\n            this.$(\"#tab-\" + tab_model.id).remove();\n            this.$(\"#\" + tab_model.id).remove();\n        },\n\n        /** Reset collection */\n        _reset: function() {\n            this.$nav.empty();\n            this.$content.empty();\n        },\n\n        /** Change tab */\n        _change: function(tab_model) {\n            this.$(\"#tab-\" + tab_model.id)[\n                tab_model.get(\"hidden\") ? \"hide\" : \"show\"\n            ]();\n        },\n\n        /** Main template */\n        _template: function() {\n            return $(\"<div/>\")\n                .addClass(\"ui-tabs tabbable tabs-left\")\n                .append($(\"<ul/>\").addClass(\"tab-navigation nav nav-tabs\"))\n                .append($(\"<div/>\").addClass(\"tab-content\"));\n        },\n\n        /** Tab template */\n        _template_tab: function(options) {\n            var $tmpl = $(\"<li/>\")\n                .addClass(\"tab-element\")\n                .attr(\"id\", \"tab-\" + options.id)\n                .append($(\"<a/>\").attr(\"id\", \"tab-title-link-\" + options.id));\n            var $href = $tmpl.find(\"a\");\n            options.icon &&\n                $href.append(\n                    $(\"<i/>\")\n                        .addClass(\"tab-icon fa\")\n                        .addClass(options.icon)\n                );\n            $href.append(\n                $(\"<span/>\")\n                    .attr(\"id\", \"tab-title-text-\" + options.id)\n                    .addClass(\"tab-title-text\")\n                    .append(options.title)\n            );\n            return $tmpl;\n        }\n    });\n\n    return { View: View };\n});\n"]}