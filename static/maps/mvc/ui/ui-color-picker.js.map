{"version":3,"sources":["mvc/ui/ui-color-picker.js"],"names":["define","Utils","Backbone","View","extend","colors","standard","base","theme","initialize","self","new_val","rgb","line_def","i","_content","$content","$line","$panel","$box","options","css","merge","this","setElement","_template","bottom","$","_build","append","value","$boxes","on","_templateCheck","trigger","$header","visible","_templateContent","fadeIn","$view","fadeOut","undefined","$value","empty","_getValue","html","onchange","match","hex","x","parseInt","toString","slice","length","find","_templateBox","top","color"],"mappings":"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","file":"../../../scripts/mvc/ui/ui-color-picker.js","sourcesContent":["/** Renders the color picker used e.g. in the tool form **/\ndefine([\"utils/utils\"], function(Utils) {\n    return Backbone.View.extend({\n        colors: {\n            standard: [\n                \"c00000\",\n                \"ff0000\",\n                \"ffc000\",\n                \"ffff00\",\n                \"92d050\",\n                \"00b050\",\n                \"00b0f0\",\n                \"0070c0\",\n                \"002060\",\n                \"7030a0\"\n            ],\n            base: [\n                \"ffffff\",\n                \"000000\",\n                \"eeece1\",\n                \"1f497d\",\n                \"4f81bd\",\n                \"c0504d\",\n                \"9bbb59\",\n                \"8064a2\",\n                \"4bacc6\",\n                \"f79646\"\n            ],\n            theme: [\n                [\n                    \"f2f2f2\",\n                    \"7f7f7f\",\n                    \"ddd9c3\",\n                    \"c6d9f0\",\n                    \"dbe5f1\",\n                    \"f2dcdb\",\n                    \"ebf1dd\",\n                    \"e5e0ec\",\n                    \"dbeef3\",\n                    \"fdeada\"\n                ],\n                [\n                    \"d8d8d8\",\n                    \"595959\",\n                    \"c4bd97\",\n                    \"8db3e2\",\n                    \"b8cce4\",\n                    \"e5b9b7\",\n                    \"d7e3bc\",\n                    \"ccc1d9\",\n                    \"b7dde8\",\n                    \"fbd5b5\"\n                ],\n                [\n                    \"bfbfbf\",\n                    \"3f3f3f\",\n                    \"938953\",\n                    \"548dd4\",\n                    \"95b3d7\",\n                    \"d99694\",\n                    \"c3d69b\",\n                    \"b2a2c7\",\n                    \"92cddc\",\n                    \"fac08f\"\n                ],\n                [\n                    \"a5a5a5\",\n                    \"262626\",\n                    \"494429\",\n                    \"17365d\",\n                    \"366092\",\n                    \"953734\",\n                    \"76923c\",\n                    \"5f497a\",\n                    \"31859b\",\n                    \"e36c09\"\n                ],\n                [\n                    \"7f7f7e\",\n                    \"0c0c0c\",\n                    \"1d1b10\",\n                    \"0f243e\",\n                    \"244061\",\n                    \"632423\",\n                    \"4f6128\",\n                    \"3f3151\",\n                    \"205867\",\n                    \"974806\"\n                ]\n            ]\n        },\n\n        initialize: function(options) {\n            this.options = Utils.merge(options, {});\n            this.setElement(this._template());\n            this.$panel = this.$(\".ui-color-picker-panel\");\n            this.$view = this.$(\".ui-color-picker-view\");\n            this.$value = this.$(\".ui-color-picker-value\");\n            this.$header = this.$(\".ui-color-picker-header\");\n            this._build();\n            this.visible = false;\n            this.value(this.options.value);\n            this.$boxes = this.$(\".ui-color-picker-box\");\n            var self = this;\n            this.$boxes.on(\"click\", function() {\n                self.value($(this).css(\"background-color\"));\n                self.$header.trigger(\"click\");\n            });\n            this.$header.on(\"click\", function() {\n                self.visible = !self.visible;\n                if (self.visible) {\n                    self.$view.fadeIn(\"fast\");\n                } else {\n                    self.$view.fadeOut(\"fast\");\n                }\n            });\n        },\n\n        /** Get/set value */\n        value: function(new_val) {\n            if (new_val !== undefined && new_val !== null) {\n                this.$value.css(\"background-color\", new_val);\n                this.$(\".ui-color-picker-box\").empty();\n                this.$(this._getValue()).html(this._templateCheck());\n                this.options.onchange && this.options.onchange(new_val);\n            }\n            return this._getValue();\n        },\n\n        /** Get value from dom */\n        _getValue: function() {\n            var rgb = this.$value.css(\"background-color\");\n            rgb = rgb.match(/^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/);\n            if (rgb) {\n                function hex(x) {\n                    return (\"0\" + parseInt(x).toString(16)).slice(-2);\n                }\n                return \"#\" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);\n            } else {\n                return null;\n            }\n        },\n\n        /** Build color panel */\n        _build: function() {\n            this._content({ colors: this.colors.base });\n            for (var i in this.colors.theme) {\n                var line_def = {};\n                if (i == 0) {\n                    line_def[\"bottom\"] = true;\n                } else if (i != this.colors.theme.length - 1) {\n                    line_def[\"top\"] = true;\n                    line_def[\"bottom\"] = true;\n                } else {\n                    line_def[\"top\"] = true;\n                }\n                line_def[\"colors\"] = this.colors.theme[i];\n                this._content(line_def);\n            }\n            this._content({ colors: this.colors.standard });\n        },\n\n        /** Create content */\n        _content: function(options) {\n            var colors = options.colors;\n            var $content = $(this._templateContent());\n            var $line = $content.find(\".line\");\n            this.$panel.append($content);\n            for (var i in colors) {\n                var $box = $(this._templateBox(colors[i]));\n                if (options.top) {\n                    $box.css(\"border-top\", \"none\");\n                    $box.css(\"border-top-left-radius\", \"0px\");\n                    $box.css(\"border-top-right-radius\", \"0px\");\n                }\n                if (options.bottom) {\n                    $box.css(\"border-bottom\", \"none\");\n                    $box.css(\"border-bottom-left-radius\", \"0px\");\n                    $box.css(\"border-bottom-right-radius\", \"0px\");\n                }\n                $line.append($box);\n            }\n            return $content;\n        },\n\n        /** Check icon */\n        _templateCheck: function() {\n            return '<div class=\"ui-color-picker-check fa fa-check\"/>';\n        },\n\n        /** Content template */\n        _templateContent: function() {\n            return (\n                '<div class=\"ui-color-picker-content\">' +\n                '<div class=\"line\"/>' +\n                \"</div>\"\n            );\n        },\n\n        /** Box template */\n        _templateBox: function(color) {\n            return (\n                '<div id=\"' +\n                color +\n                '\" class=\"ui-color-picker-box\" style=\"background-color: #' +\n                color +\n                ';\"/>'\n            );\n        },\n\n        /** Main template */\n        _template: function() {\n            return (\n                '<div class=\"ui-color-picker\">' +\n                '<div class=\"ui-color-picker-header\">' +\n                '<div class=\"ui-color-picker-value\"/>' +\n                '<div class=\"ui-color-picker-label\">Select a color</div>' +\n                \"</div>\" +\n                '<div class=\"ui-color-picker-view ui-input\">' +\n                '<div class=\"ui-color-picker-panel\"/>' +\n                \"</div>\"\n            );\n            (\"</div>\");\n        }\n    });\n});\n"]}