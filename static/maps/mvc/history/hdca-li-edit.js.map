{"version":3,"sources":["mvc/history/hdca-li-edit.js"],"names":["define","_super","HDCA_LI","HDCAListItemView","_l","HDCAListItemEdit","extend","_getFoldoutPanelClass","DC_VIEW_EDIT","PairCollectionViewEdit","ListOfPairsCollectionViewEdit","ListOfListsCollectionViewEdit","TypeError","_renderPrimaryActions","this","model","get","_renderDeleteButton","faIconButton","self","log","prototype","deleted","concat","find","title","classes","faIcon","disabled","modelString","$el","trigger","toString"],"mappings":"aAAAA,QAEQ,sBAMA,sCAJA,oBAMA,sBACA,SAAIC,EAASC,EAAQC,EAArBC,GAII,IAAAH,EAAAC,EAAAC,iBAiEJ,OACIE,iBAnEmBJ,EAAOK,QAUdC,sBAAA,WACI,OAAOC,KAAAA,MAAAA,IAAaC,oBACnB,IAAA,OACMD,OAAAA,EAAaE,uBACnB,IAAA,SACMF,OAAAA,EAAaG,uBAR5B,IAAA,cAUUC,OACNJ,EAAAE,8BAjB6B,IAAA,YAczB,OAAOF,EAAaG,8BAShC,MAAA,IAAAC,UACAC,2BACoBC,KAAAC,MAAAC,IAAA,qBAQpBC,sBAAqB,WAGVC,OAFHC,KAAOC,IAAXN,KAAA,0BAEOI,EAAaG,UAAAR,sBACTS,KAAAA,MAGEC,QAAAT,KAJOG,yBAQZA,oBAAA,WACAE,IAAAA,EACKK,KAELL,EAAWL,KAAXC,MAAAC,IAAA,WACH,OAAAE,GAbLO,MApCiCrB,EAoCjCkB,EApCiC,wCAuCpB,UAcjBI,QAAA,aACAC,OAAA,WACUC,SAAAN,EACFO,QAAc,WAIrBV,EAAAW,IA7DTN,KAAA,wBAgDyBO,QAAQ,YAiBjCZ,EAAAJ,MAAA,aATQiB,SAAU,WAIN,MAAO,qBAHWlB,KAAKC,MACjBD,KAAKC,MAAQ,GACb,cACqC","file":"../../../scripts/mvc/history/hdca-li-edit.js","sourcesContent":["define(\n    [\n        \"mvc/history/hdca-li\",\n        \"mvc/collection/collection-view-edit\",\n        \"ui/fa-icon-button\",\n        \"utils/localization\"\n    ],\n    function(HDCA_LI, DC_VIEW_EDIT, faIconButton, _l) {\n        \"use strict\";\n\n        //==============================================================================\n        var _super = HDCA_LI.HDCAListItemView;\n        /** @class Editing view for HistoryDatasetCollectionAssociation.\n */\n        var HDCAListItemEdit = _super.extend(\n            /** @lends HDCAListItemEdit.prototype */ {\n                /** logger used to record this.log messages, commonly set to console */\n                //logger              : console,\n\n                /** Override to return editable versions of the collection panels */\n                _getFoldoutPanelClass: function() {\n                    switch (this.model.get(\"collection_type\")) {\n                        case \"list\":\n                            return DC_VIEW_EDIT.ListCollectionViewEdit;\n                        case \"paired\":\n                            return DC_VIEW_EDIT.PairCollectionViewEdit;\n                        case \"list:paired\":\n                            return DC_VIEW_EDIT.ListOfPairsCollectionViewEdit;\n                        case \"list:list\":\n                            return DC_VIEW_EDIT.ListOfListsCollectionViewEdit;\n                    }\n                    throw new TypeError(\n                        \"Uknown collection_type: \" +\n                            this.model.get(\"collection_type\")\n                    );\n                },\n\n                // ......................................................................... delete\n                /** In this override, add the delete button. */\n                _renderPrimaryActions: function() {\n                    this.log(this + \"._renderPrimaryActions\");\n                    // render the display, edit attr and delete icon-buttons\n                    return _super.prototype._renderPrimaryActions\n                        .call(this)\n                        .concat([this._renderDeleteButton()]);\n                },\n\n                /** Render icon-button to delete this collection. */\n                _renderDeleteButton: function() {\n                    var self = this,\n                        deleted = this.model.get(\"deleted\");\n                    return faIconButton({\n                        title: deleted\n                            ? _l(\"Dataset collection is already deleted\")\n                            : _l(\"Delete\"),\n                        classes: \"delete-btn\",\n                        faIcon: \"fa-times\",\n                        disabled: deleted,\n                        onclick: function() {\n                            // ...bler... tooltips being left behind in DOM (hover out never called on deletion)\n                            self.$el\n                                .find(\".icon-btn.delete-btn\")\n                                .trigger(\"mouseout\");\n                            self.model[\"delete\"]();\n                        }\n                    });\n                },\n\n                // ......................................................................... misc\n                /** string rep */\n                toString: function() {\n                    var modelString = this.model\n                        ? this.model + \"\"\n                        : \"(no model)\";\n                    return \"HDCAListItemEdit(\" + modelString + \")\";\n                }\n            }\n        );\n\n        //==============================================================================\n        return {\n            HDCAListItemEdit: HDCAListItemEdit\n        };\n    }\n);\n"]}