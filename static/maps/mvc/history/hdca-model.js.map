{"version":3,"sources":["mvc/history/hdca-model.js"],"names":["define","DC_MODEL","HISTORY_CONTENT","_l","attributes","_super","options","HistoryListDatasetCollection","url","this","urlRoot","get","type","ListDC","hcontentMixin","HistoryContentMixin","ListDatasetCollection","PairDC","buildHDCASave","ListPairedDC","_save","ListOfListsDC","ListOfListsDatasetCollection","extend","prototype","defaults","history_content_type","collection_type","model_class","save","toString","call","HistoryPairDatasetCollection","_","clone","HistoryListPairedDatasetCollection","HistoryListOfListsDatasetCollection","join"],"mappings":"aAAAA,QAEQ,kCAKA,oCAHA,sBAEJ,SAASC,EAAUC,EAAiBC,GA2BpBC,SAAAA,EAAAC,GACH,OAAA,SAAAD,EAAAE,GAQLC,OAPWF,KAAAA,WARXC,EAAAA,OAUHE,IANeC,KAAKC,QAAUD,KAAKE,IAAI,cAAgB,aAQxDP,EAAAA,OACAQ,KAAA,sBAEIL,EAAAA,KAAAA,KAA+BM,EAAcC,IAlBjD,IAAAA,EAAAZ,EAAAa,oBACAF,EAAAZ,EAAAe,sBACAC,EAASC,EAAcb,sBACnBc,EAAgBC,EAAMhB,4BAClBiB,EAAApB,EAAkBqB,6BAmG1B,OACIf,6BAtF+BM,EAAOU,OAAOT,GAAeS,QASlDL,SAAAA,EAAcL,OAAOW,EAAAA,MAAAA,EARsBA,UAAAC,WAE7CC,qBAAsB,qBAQ1BC,gBAAA,OACUC,YAAA,wCAHVC,KAAMX,EAAcL,EAAOW,UAAUK,MAGrCC,SAAU,WACN,MAAO,UAAYjB,EAAOW,UAAUM,SAASC,KAAKtB,SA0E1DuB,6BAzDIf,EAAAM,OAAAT,GAAAS,QANAE,SAAUQ,EAAEV,OAAOU,EAAEC,MAAMjB,EAAOO,UAAUC,WAS5CC,qBAAA,qBACUC,gBAAA,SACCC,YAAYX,wCAK/BY,KAAAX,EAAAD,EAAAO,UAAAK,MAKIJ,SAAU,WACNC,MAAAA,UAAsBT,EAAAO,UADmCM,SAAAC,KAAAtB,SA2C7D0B,mCA9CqChB,EAAaI,OAYlDT,GACAgB,QACIL,SAAOQ,EAAAV,OAAYJ,EAAAA,MAAAA,EAAaK,UAAbC,WACtBC,qBAAA,qBAfLC,gBAAA,cAMQC,YAAa,wCAiBjBH,KAAUQ,EAAWC,EAAMb,UAAcG,MAGrCI,SAAAA,WAJC,MAAA,UAAAT,EAAAK,UAAAM,SAAAC,KAAAtB,SAyBL2B,oCAdqBf,EAAAE,OACjBT,GAKHS,QAnBLE,SAAAQ,EAAAV,OAAAU,EAAAC,MAAAb,EAAAG,UAAAC,WAIQC,qBAAsB,qBAkB9BC,gBAAA,YACOC,YAAA,wCAIHQ,KAAAA,EAAAA,EAAqCA,UAAAA,MAdrCN,SAAU,WACN,OACI,uCACArB,KAAKE,IAAI,QACT,KACF0B,KAAK","file":"../../../scripts/mvc/history/hdca-model.js","sourcesContent":["define(\n    [\n        \"mvc/collection/collection-model\",\n        \"mvc/history/history-content-model\",\n        \"utils/localization\"\n    ],\n    function(DC_MODEL, HISTORY_CONTENT, _l) {\n        \"use strict\";\n\n        /*==============================================================================\n\nModels for DatasetCollections contained within a history.\n\nTODO:\n    these might be compactable to one class if some duplication with\n    collection-model is used.\n\n==============================================================================*/\n        var hcontentMixin = HISTORY_CONTENT.HistoryContentMixin,\n            ListDC = DC_MODEL.ListDatasetCollection,\n            PairDC = DC_MODEL.PairDatasetCollection,\n            ListPairedDC = DC_MODEL.ListPairedDatasetCollection,\n            ListOfListsDC = DC_MODEL.ListOfListsDatasetCollection;\n\n        //==============================================================================\n        /** Override to post to contents route w/o id. */\n        function buildHDCASave(_super) {\n            return function _save(attributes, options) {\n                if (this.isNew()) {\n                    options = options || {};\n                    options.url =\n                        this.urlRoot + this.get(\"history_id\") + \"/contents\";\n                    attributes = attributes || {};\n                    attributes.type = \"dataset_collection\";\n                }\n                return _super.call(this, attributes, options);\n            };\n        }\n\n        //==============================================================================\n        /** @class Backbone model for List Dataset Collection within a History.\n */\n        var HistoryListDatasetCollection = ListDC.extend(hcontentMixin).extend(\n            /** @lends HistoryListDatasetCollection.prototype */ {\n                defaults: _.extend(_.clone(ListDC.prototype.defaults), {\n                    history_content_type: \"dataset_collection\",\n                    collection_type: \"list\",\n                    model_class: \"HistoryDatasetCollectionAssociation\"\n                }),\n\n                /** Override to post to contents route w/o id. */\n                save: buildHDCASave(ListDC.prototype.save),\n\n                /** String representation. */\n                toString: function() {\n                    return \"History\" + ListDC.prototype.toString.call(this);\n                }\n            }\n        );\n\n        //==============================================================================\n        /** @class Backbone model for Pair Dataset Collection within a History.\n *  @constructs\n */\n        var HistoryPairDatasetCollection = PairDC.extend(hcontentMixin).extend(\n            /** @lends HistoryPairDatasetCollection.prototype */ {\n                defaults: _.extend(_.clone(PairDC.prototype.defaults), {\n                    history_content_type: \"dataset_collection\",\n                    collection_type: \"paired\",\n                    model_class: \"HistoryDatasetCollectionAssociation\"\n                }),\n\n                /** Override to post to contents route w/o id. */\n                save: buildHDCASave(PairDC.prototype.save),\n\n                /** String representation. */\n                toString: function() {\n                    return \"History\" + PairDC.prototype.toString.call(this);\n                }\n            }\n        );\n\n        //==============================================================================\n        /** @class Backbone model for List of Pairs Dataset Collection within a History. */\n        var HistoryListPairedDatasetCollection = ListPairedDC.extend(\n            hcontentMixin\n        ).extend({\n            defaults: _.extend(_.clone(ListPairedDC.prototype.defaults), {\n                history_content_type: \"dataset_collection\",\n                collection_type: \"list:paired\",\n                model_class: \"HistoryDatasetCollectionAssociation\"\n            }),\n\n            /** Override to post to contents route w/o id. */\n            save: buildHDCASave(ListPairedDC.prototype.save),\n\n            /** String representation. */\n            toString: function() {\n                return \"History\" + ListPairedDC.prototype.toString.call(this);\n            }\n        });\n\n        //==============================================================================\n        /** @class Backbone model for List of Lists Dataset Collection within a History. */\n        var HistoryListOfListsDatasetCollection = ListOfListsDC.extend(\n            hcontentMixin\n        ).extend({\n            defaults: _.extend(_.clone(ListOfListsDC.prototype.defaults), {\n                history_content_type: \"dataset_collection\",\n                collection_type: \"list:list\",\n                model_class: \"HistoryDatasetCollectionAssociation\"\n            }),\n\n            /** Override to post to contents route w/o id. */\n            save: buildHDCASave(ListOfListsDC.prototype.save),\n\n            /** String representation. */\n            toString: function() {\n                return [\n                    \"HistoryListOfListsDatasetCollection(\",\n                    this.get(\"name\"),\n                    \")\"\n                ].join(\"\");\n            }\n        });\n\n        //==============================================================================\n        return {\n            HistoryListDatasetCollection: HistoryListDatasetCollection,\n            HistoryPairDatasetCollection: HistoryPairDatasetCollection,\n            HistoryListPairedDatasetCollection: HistoryListPairedDatasetCollection,\n            HistoryListOfListsDatasetCollection: HistoryListOfListsDatasetCollection\n        };\n    }\n);\n"]}