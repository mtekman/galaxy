{"version":3,"sources":["mvc/toolshed/toolshed-model.js"],"names":["define","ToolShedModel","Backbone","Model","extend","defaults","name","root","ToolShedsCollection","Collection","url","Galaxy","ToolShedCategoriesModel","ToolShedCategoriesCollection","ToolShedCategoryModel","ToolShedCategoryCollection","ToolShedRepositoryModel","ToolShedRepositoryCollection","RepoQueueModel","RepoQueueCollection","model","this","repositories","Array","collection","JSON","parse","localStorage","repositories_enc","_","each","queue_keys","key","push","prototype","fetch","call","RepoStatusModel","RepoStatusCollection","WorkflowToolsModel","ShedModel","ShedsCollection","Category","Categories","CategoryModel","CategoryCollection","RepositoryModel","RepositoryCollection","RepoQueue","WorkflowToolsCollection"],"mappings":"aAAAA,UAAW,WACP,IAAIC,EAAgBC,SAASC,MAAMC,QADhCC,UACCJ,IAAAA,kCACAI,KAAU,yBAENC,QAAAA,OAAMC,KAAA,kBAHdC,EAAAN,SAAAO,WAAAL,QASIM,IAAKC,OAAOJ,KAAO,gBADnBC,MAAAA,IAAJI,EAAAV,SAAAC,MAAAC,QAMIC,cADAO,QAAAA,OAAAA,KAAAA,2BAAJC,EAAAX,SAAAO,WAAAL,QAMIM,IAAKC,OAAOJ,KAAO,yBADnBM,MAAAA,IAAJC,EAAAZ,SAAAC,MAAAC,QAMIC,cADAS,QAAAA,OAAAA,KAAAA,2BAAJC,EAAAb,SAAAO,WAAAL,QAMIM,IAAKC,OAAOJ,KAAO,yBADnBQ,MAAAA,IAAJC,EAAAd,SAAAC,MAAAC,QAMIC,cADAW,QAAAA,OAAAA,KAAAA,6BAAJC,EAAAf,SAAAO,WAAAL,QAMIM,IAAKC,OAAOJ,KAAO,2BADnBU,MAAAA,IAAJC,EAAAhB,SAAAC,MAAAC,QAMIM,IAAK,MADTS,EAAAjB,SAAAO,WAAAL,QAKIM,IAAK,IADLS,MAAAA,EACAT,MAAK,WACLU,IAAOF,EAF0CG,KAG1CC,EAAAC,QACCC,EAAJC,KAAAC,MAAAC,aAAAL,cACIA,EAAAA,OAAeC,KAAnBK,GAOC,OANDC,EAAAC,KAAIF,EAAAA,SAAwBF,GACxBK,IAAAA,EAAAA,EAAyBH,GAC3BE,EAAKC,UAAYC,EACfV,EAAWM,KAAAA,KAEXN,EAAAA,MAAaW,GAHjB/B,SAAAO,WAAAyB,UAAAC,MAAAC,KAAAf,SARRgB,EAAAnC,SAAAC,MAAAC,QAmBIC,cADAgC,QAAAA,OAAAA,KAAkBnC,yBAAtBoC,EAAApC,SAAAO,WAAAL,QAMIM,IAAKC,OAAOJ,KAAO,uBADnB+B,MAAAA,IAAJC,EAAArC,SAAAC,MAAAC,QAMIC,cADAkC,QAAAA,OAAAA,KAAqBrC,qCAKgC,OAMrDsC,UAAWvC,EADfwC,gBAAOjC,EACHgC,SAAAA,EACAC,WAAAA,EACAC,cAAU9B,EACV+B,mBAAY9B,EACZ+B,gBAAe9B,EACf+B,qBAAoB9B,EACpB+B,UAAAA,EACAC,WAAAA,EACAC,cAnBJ9C,SAAAO,WAAAL,QAMIM,IAAKC,OAAOJ,KAAO,mCADnB0C,MAAAA","file":"../../../scripts/mvc/toolshed/toolshed-model.js","sourcesContent":["define([], function() {\n    var ToolShedModel = Backbone.Model.extend({\n        defaults: {\n            url: \"https://toolshed.g2.bx.psu.edu/\",\n            name: \"Galaxy Main Tool Shed\"\n        },\n        urlRoot: Galaxy.root + \"api/tool_shed\"\n    });\n\n    var ToolShedsCollection = Backbone.Collection.extend({\n        url: Galaxy.root + \"api/tool_shed\",\n        model: ToolShedModel\n    });\n\n    var ToolShedCategoriesModel = Backbone.Model.extend({\n        defaults: [{}],\n        urlRoot: Galaxy.root + \"api/tool_shed/contents\"\n    });\n\n    var ToolShedCategoriesCollection = Backbone.Collection.extend({\n        url: Galaxy.root + \"api/tool_shed/contents\",\n        model: ToolShedCategoriesModel\n    });\n\n    var ToolShedCategoryModel = Backbone.Model.extend({\n        defaults: [{}],\n        urlRoot: Galaxy.root + \"api/tool_shed/category\"\n    });\n\n    var ToolShedCategoryCollection = Backbone.Collection.extend({\n        url: Galaxy.root + \"api/tool_shed/category\",\n        model: ToolShedCategoryModel\n    });\n\n    var ToolShedRepositoryModel = Backbone.Model.extend({\n        defaults: [{}],\n        urlRoot: Galaxy.root + \"api/tool_shed/repository\"\n    });\n\n    var ToolShedRepositoryCollection = Backbone.Collection.extend({\n        url: Galaxy.root + \"api/tool_shed/repository\",\n        model: ToolShedRepositoryModel\n    });\n\n    var RepoQueueModel = Backbone.Model.extend({\n        url: \"#\"\n    });\n\n    var RepoQueueCollection = Backbone.Collection.extend({\n        url: \"#\",\n        model: RepoQueueModel,\n        fetch: function() {\n            var collection = this;\n            var repositories = Array();\n            var repositories_enc = JSON.parse(localStorage.repositories);\n            var queue_keys = Object.keys(repositories_enc);\n            _.each(queue_keys, function(key) {\n                var repo = repositories_enc[key];\n                repo.queue_key = key;\n                repositories.push(repo);\n            });\n            collection.reset(repositories);\n            return Backbone.Collection.prototype.fetch.call(this);\n        }\n    });\n\n    var RepoStatusModel = Backbone.Model.extend({\n        defaults: [{}],\n        urlRoot: Galaxy.root + \"api/tool_shed/status\"\n    });\n\n    var RepoStatusCollection = Backbone.Collection.extend({\n        url: Galaxy.root + \"api/tool_shed/status\",\n        model: RepoStatusModel\n    });\n\n    var WorkflowToolsModel = Backbone.Model.extend({\n        defaults: [{}],\n        urlRoot: Galaxy.root + \"api/workflows?missing_tools=True\"\n    });\n\n    var WorkflowToolsCollection = Backbone.Collection.extend({\n        url: Galaxy.root + \"api/workflows?missing_tools=True\",\n        model: WorkflowToolsModel\n    });\n\n    return {\n        ShedModel: ToolShedModel,\n        ShedsCollection: ToolShedsCollection,\n        Category: ToolShedCategoriesModel,\n        Categories: ToolShedCategoriesCollection,\n        CategoryModel: ToolShedCategoryModel,\n        CategoryCollection: ToolShedCategoryCollection,\n        RepositoryModel: ToolShedRepositoryModel,\n        RepositoryCollection: ToolShedRepositoryCollection,\n        RepoQueue: RepoQueueCollection,\n        RepoStatus: RepoStatusCollection,\n        WorkflowTools: WorkflowToolsCollection\n    };\n});\n"]}