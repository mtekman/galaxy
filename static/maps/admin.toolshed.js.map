{"version":3,"sources":["admin.toolshed.js"],"names":["define","AdminToolshedRouter","initialize","Backbone","mod_shed_list_view","mod_categories_view","routes","mod_repository_view","sheds","queue","workflows","status","Router","extend","this","routesHit","history","on","bind","trackPageview","window","","navigate","status/r/:repositories","GalaxyAdminToolshedApp","View","app_config","known_views","Galaxy","admintoolshedapp","trigger","replace","GalaxyApp","adminShedListView","admin_toolshed_router","tool_shed","adminShedCategoryView","category_id","adminRepoQueueView","reDraw","mod_repoqueue_view","RepoQueueView","adminRepositoryView","ShedListView","repository_id","adminShedCategoriesView","repositories","CategoryView","adminRepoStatusView","adminWorkflowsView","mod_repositories_view","Category","start","pushState","RepoDetails","split","mod_repo_status_view","RepoStatus","mod_workflows_view","Workflows"],"mappings":"aAAAA,QAEQ,8BAiBIC,+BACAC,iCACI,+BACA,qCACAC,gCAGQ,+BAIR,SACHC,EAnBLC,EAqBIC,EACIC,EACAC,EACAC,EACAC,GAEAC,IAAAA,EANIR,SAAAS,OAAAC,QAOJX,WAAA,WACAY,KAAAC,UAAA,EAtByCZ,SAAAa,QAAAC,GAKrC,QAqBR,WAnBYH,KAAKC,aAETD,MAEJA,KAAKI,KAAK,QAASJ,KAAKK,gBAuBpBC,QADJC,GAEO,YACHb,MAAKc,YACRb,MAAA,QACJC,UAAA,YAtCLa,yBAAA,SAoBQZ,OAAQ,SAqBZa,0BAAkCC,aAClCC,sCAAY,eACRC,2CAII,cAYIC,KAAAA,WADJd,KAEOC,UAAA,EACHa,OAAOC,QAAAA,OAJff,KAAAQ,SAAA,KAAAQ,SAAA,EAAAC,SAAA,OAwFR,OACIC,UA9EmBH,SAAiBI,KAAAA,QAC3BP,YALLC,aAOKO,YAGGN,QACAA,SACIO,aADmD,eAD3D,gBAUJjC,WAAKgC,WAIDN,OAAIA,iBAAOC,KACPD,KAAAA,sBAAwBQ,IAAAA,EAEpBC,KAAAA,sBAAaA,GAAAA,cAAAA,WAFjBT,OAAAC,iBAAAS,mBAIGV,OAAAC,iBAAAS,mBAAAC,SAGKJ,OAAAA,iBAAqBJ,mBADzB,IAAAS,EAAAC,gBAKP3B,KAAAoB,sBAAAjB,GAAA,kBAAA,WAhBLW,OAAAC,iBAAAI,kBAkBKC,OAAAA,iBAAyBD,kBAAoBM,SAK1CX,OAAOC,iBAAiBa,kBAAoBH,IAAOnC,EAAAuC,eAAA7B,KAAnDoB,sBAAAjB,GAAA,mBAAA,SADJkB,GAQYA,OAAAA,iBAAqBJ,wBACrBa,OAAAA,iBAAeA,wBAAAA,QAHvBT,UAAAA,EAAAJ,QAAA,MAAA,SAQHG,OAAAA,iBAAyBW,wBAC1BC,IAAAA,EACFC,cACalB,UAAAA,EAAiBmB,QAAAA,MAAqB,WAIhDlC,KAJDoB,sBAIOjB,GAAA,qBAAA,SACHW,EAGHS,GAEAH,OAAAA,iBAAyBE,sBACtBR,OAAOC,iBAAiBoB,sBAAoBV,QACrCV,UAAAA,EAAiBoB,QAAAA,MAAmBV,OACxCF,YAAAA,IAHXT,OAAAC,iBAAAO,sBAAA,IAAAc,EAAAC,UAQiBC,UAAQC,EAAFtB,QAAvB,MAAA,OACHM,YAAAA,MAGLvB,KAAAoB,sBAAAjB,GAAA,mBAAA,SApKRkB,EA2HoBS,GAEIhB,OAAOC,iBAAiBa,oBACxBd,OAAOC,iBAAiBa,oBAAoBH,QACxCJ,UAAWA,EAAUJ,QAAQ,MAAO,OACpCa,cAAeA,IAGnBhB,OAAOC,iBAAiBa,oBAAsB,IAAInC,EAAoB+C,aAE9DnB,UAAWA,EAAUJ,QAAQ,MAAO,OACpCa,cAAeA,MAK/B9B,KAAKoB,sBAAsBjB,GAAG,eAAgB,SAC1C6B,GAEIlB,OAAOC,iBAAiBmB,oBACxBpB,OAAOC,iBAAiBmB,oBAAoBT,QACxCO,aAAcA,EAAaS,MAAM,OAGrC3B,OAAOC,iBAAiBmB,oBAAsB,IAAIQ,EAAqBC,YACjEX,aAAcA,EAAaS,MAAM,SAI/CzC,KAAKoB,sBAAsBjB,GAAG,kBAAmB,WACzCW,OAAOC,iBAAiBoB,mBACxBrB,OAAOC,iBAAiBoB,mBAAmBV,SAE3CX,OAAOC,iBAAiBoB,mBAAqB,IAAIS,EAAmBC,YAI5ExD,SAASa,QAAQoC,OAAQC,WAAW","file":"../scripts/admin.toolshed.js","sourcesContent":["define(\n    [\n        \"mvc/toolshed/shed-list-view\",\n        \"mvc/toolshed/categories-view\",\n        \"mvc/toolshed/repositories-view\",\n        \"mvc/toolshed/repository-view\",\n        \"mvc/toolshed/repository-queue-view\",\n        \"mvc/toolshed/repo-status-view\",\n        \"mvc/toolshed/workflows-view\"\n    ],\n    function(\n        mod_shed_list_view,\n        mod_categories_view,\n        mod_repositories_view,\n        mod_repository_view,\n        mod_repoqueue_view,\n        mod_repo_status_view,\n        mod_workflows_view\n    ) {\n        var AdminToolshedRouter = Backbone.Router.extend({\n            initialize: function() {\n                this.routesHit = 0;\n                // keep count of number of routes handled by the application\n                Backbone.history.on(\n                    \"route\",\n                    function() {\n                        this.routesHit++;\n                    },\n                    this\n                );\n                this.bind(\"route\", this.trackPageview);\n            },\n\n            routes: {\n                \"\": \"toolsheds\",\n                sheds: \"toolsheds\",\n                queue: \"queue\",\n                workflows: \"workflows\",\n                \"status/r/:repositories\": \"status\",\n                status: \"status\",\n                \"categories/s/:tool_shed\": \"categories\",\n                \"category/s/:tool_shed/c/:cateory_id\": \"repositories\",\n                \"repository/s/:tool_shed/r/:repository_id\": \"repository\"\n            },\n\n            /**\n        * If more than one route has been hit the user did not land on current\n        * page directly so we can go back safely. Otherwise go to the home page.\n        * Use replaceState if available so the navigation doesn't create an\n        * extra history entry\n        */\n            back: function() {\n                if (this.routesHit > 1) {\n                    window.history.back();\n                } else {\n                    this.navigate(\"#\", { trigger: true, replace: true });\n                }\n            }\n        });\n\n        var GalaxyAdminToolshedApp = Backbone.View.extend({\n            app_config: {\n                known_views: [\n                    \"toolsheds\",\n                    \"queue\",\n                    \"status\",\n                    \"categories\",\n                    \"repositories\",\n                    \"repoository\"\n                ]\n            },\n\n            initialize: function() {\n                Galaxy.admintoolshedapp = this;\n                this.admin_toolshed_router = new AdminToolshedRouter();\n\n                this.admin_toolshed_router.on(\"route:queue\", function() {\n                    if (Galaxy.admintoolshedapp.adminRepoQueueView) {\n                        Galaxy.admintoolshedapp.adminRepoQueueView.reDraw();\n                    } else {\n                        Galaxy.admintoolshedapp.adminRepoQueueView = new mod_repoqueue_view.RepoQueueView();\n                    }\n                });\n                this.admin_toolshed_router.on(\"route:toolsheds\", function() {\n                    if (Galaxy.admintoolshedapp.adminShedListView) {\n                        Galaxy.admintoolshedapp.adminShedListView.reDraw();\n                    } else {\n                        Galaxy.admintoolshedapp.adminShedListView = new mod_shed_list_view.ShedListView();\n                    }\n                });\n                this.admin_toolshed_router.on(\"route:categories\", function(\n                    tool_shed\n                ) {\n                    if (Galaxy.admintoolshedapp.adminShedCategoriesView) {\n                        Galaxy.admintoolshedapp.adminShedCategoriesView.reDraw({\n                            tool_shed: tool_shed.replace(/\\//g, \"%2f\")\n                        });\n                    } else {\n                        Galaxy.admintoolshedapp.adminShedCategoriesView = new mod_categories_view.CategoryView(\n                            { tool_shed: tool_shed.replace(/\\//g, \"%2f\") }\n                        );\n                    }\n                });\n                this.admin_toolshed_router.on(\"route:repositories\", function(\n                    tool_shed,\n                    category_id\n                ) {\n                    if (Galaxy.admintoolshedapp.adminShedCategoryView) {\n                        Galaxy.admintoolshedapp.adminShedCategoryView.reDraw({\n                            tool_shed: tool_shed.replace(/\\//g, \"%2f\"),\n                            category_id: category_id\n                        });\n                    } else {\n                        Galaxy.admintoolshedapp.adminShedCategoryView = new mod_repositories_view.Category(\n                            {\n                                tool_shed: tool_shed.replace(/\\//g, \"%2f\"),\n                                category_id: category_id\n                            }\n                        );\n                    }\n                });\n                this.admin_toolshed_router.on(\"route:repository\", function(\n                    tool_shed,\n                    repository_id\n                ) {\n                    if (Galaxy.admintoolshedapp.adminRepositoryView) {\n                        Galaxy.admintoolshedapp.adminRepositoryView.reDraw({\n                            tool_shed: tool_shed.replace(/\\//g, \"%2f\"),\n                            repository_id: repository_id\n                        });\n                    } else {\n                        Galaxy.admintoolshedapp.adminRepositoryView = new mod_repository_view.RepoDetails(\n                            {\n                                tool_shed: tool_shed.replace(/\\//g, \"%2f\"),\n                                repository_id: repository_id\n                            }\n                        );\n                    }\n                });\n                this.admin_toolshed_router.on(\"route:status\", function(\n                    repositories\n                ) {\n                    if (Galaxy.admintoolshedapp.adminRepoStatusView) {\n                        Galaxy.admintoolshedapp.adminRepoStatusView.reDraw({\n                            repositories: repositories.split(\"|\")\n                        });\n                    } else {\n                        Galaxy.admintoolshedapp.adminRepoStatusView = new mod_repo_status_view.RepoStatus(\n                            { repositories: repositories.split(\"|\") }\n                        );\n                    }\n                });\n                this.admin_toolshed_router.on(\"route:workflows\", function() {\n                    if (Galaxy.admintoolshedapp.adminWorkflowsView) {\n                        Galaxy.admintoolshedapp.adminWorkflowsView.reDraw();\n                    } else {\n                        Galaxy.admintoolshedapp.adminWorkflowsView = new mod_workflows_view.Workflows();\n                    }\n                });\n\n                Backbone.history.start({ pushState: false });\n            }\n        });\n\n        return {\n            GalaxyApp: GalaxyAdminToolshedApp\n        };\n    }\n);\n"]}