"use strict";define(["libs/underscore","libs/backbone","mvc/base-mvc","utils/localization"],function(e,t,i,n){var o=t.Model.extend(i.LoggableMixin).extend({_logNamespace:"user",urlRoot:function(){return Galaxy.root+"api/users"},defaults:{id:null,username:"("+n("anonymous user")+")",email:"",total_disk_usage:0,nice_total_disk_usage:"",quota_percent:null,is_admin:!1},initialize:function(e){this.log("User.initialize:",e),this.on("loaded",function(e,t){this.log(this+" has loaded:",e,t)}),this.on("change",function(e,t){this.log(this+" has changed:",e,t.changes)})},isAnonymous:function(){return!this.get("email")},isAdmin:function(){return this.get("is_admin")},loadFromApi:function(e,i){e=e||o.CURRENT_ID_STR;var n=this,s=(i=i||{}).success;return i.success=function(e,t){n.trigger("loaded",e,t),s&&s(e,t)},e===o.CURRENT_ID_STR&&(i.url=this.urlRoot+"/"+o.CURRENT_ID_STR),t.Model.prototype.fetch.call(this,i)},clearSessionStorage:function(){for(var e in sessionStorage)0===e.indexOf("history:")?sessionStorage.removeItem(e):"history-panel"===e&&sessionStorage.removeItem(e)},toString:function(){var e=[this.get("username")];return this.get("id")&&(e.unshift(this.get("id")),e.push(this.get("email"))),"User("+e.join(":")+")"}});o.CURRENT_ID_STR="current",o.getCurrentUserFromApi=function(e){var t=new o;return t.loadFromApi(o.CURRENT_ID_STR,e),t};t.Collection.extend(i.LoggableMixin).extend({model:o,urlRoot:function(){return Galaxy.root+"api/users"}});return{User:o}});
//# sourceMappingURL=../../../maps/mvc/user/user-model.js.map
