"use strict";define(["libs/bibtex","mvc/base-mvc","utils/localization"],function(t,i,e){t=t||window.BibtexParser,_.extend(t.ENTRY_TYPES_,{online:998,data:999});var n=Backbone.Model.extend(i.LoggableMixin).extend({_logNamespace:"citation",defaults:{content:""},initialize:function(){var i;try{i=t(this.attributes.content)}catch(t){return}if(i.errors.length){var e=i.errors.reduce(function(t,i){return t+"; "+i});this.log("Error parsing bibtex: "+e)}if(this._fields={},this.entry=_.first(i.entries),this.entry){var n=this.entry.Fields;for(var o in n){var r=n[o],s=o.toLowerCase();this._fields[s]=r}}},entryType:function(){return this.entry?this.entry.EntryType:void 0},fields:function(){return this._fields}}),o=Backbone.Collection.extend(i.LoggableMixin).extend({_logNamespace:"citation",urlRoot:Galaxy.root+"api",partial:!0,model:n});return{Citation:n,HistoryCitationCollection:o.extend({url:function(){return this.urlRoot+"/histories/"+this.history_id+"/citations"}}),ToolCitationCollection:o.extend({url:function(){return this.urlRoot+"/tools/"+this.tool_id+"/citations"},partial:!1})}});
//# sourceMappingURL=../../../maps/mvc/citation/citation-model.js.map
