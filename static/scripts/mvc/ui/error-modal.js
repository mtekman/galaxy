"use strict";define(["utils/localization"],function(a){function e(e,o,r){return Galaxy.modal.show({title:o,body:e,closing_events:!0,buttons:{Ok:function(){Galaxy.modal.hide()}}}),Galaxy.modal.$el.addClass("error-modal"),r&&(Galaxy.modal.$(".error-details").add(Galaxy.modal.$('button:contains("Details")')).remove(),$("<div/>").addClass("error-details").hide().appendTo(Galaxy.modal.$(".modal-content")).append([$("<p/>").text(l),$("<pre/>").text(JSON.stringify(r,null,"  "))]),$('<button id="button-1" class="pull-left">'+a("Details")+"</button>").appendTo(Galaxy.modal.$(".buttons")).click(function(){Galaxy.modal.$(".error-details").toggle()})),Galaxy.modal}function o(o,r,t){if(o){if(o=a(o),r=a(r)||a("Error:"),window.Galaxy&&Galaxy.modal)return e(o,r,t);alert(r+"\n\n"+o),console.log("error details:",JSON.stringify(t))}}function r(a,e,o){return{raven:_.result(window.Raven,"lastEventId"),userAgent:navigator.userAgent,onLine:navigator.onLine,version:_.result(Galaxy.config,"version_major"),xhr:_.omit(e,_.functions(e)),options:_.omit(o,"xhr"),url:_.result(Galaxy.lastAjax,"url"),data:_.result(Galaxy.lastAjax,"data"),model:_.result(a,"toJSON",a+""),user:_.omit(_.result(Galaxy.user,"toJSON"),"email")}}var t=a("Please contact a Galaxy administrator if the problem persists."),n=a("An error occurred while updating information with the server."),l=a("The following information can assist the developers in finding the source of the error:");return{errorModal:o,offlineErrorModal:function(){return o(a("You appear to be offline. Please check your connection and try again."),a("Offline?"))},badGatewayErrorModal:function(){return o(a("Galaxy is currently unreachable. Please try again in a few minutes.")+" "+t,a("Cannot connect to Galaxy"))},ajaxErrorModal:function(e,l,i,s,d){return s=s||n,o(s+=" "+t,d=d||a("An error occurred"),r(e,l,i))}}});
//# sourceMappingURL=../../../maps/mvc/ui/error-modal.js.map
