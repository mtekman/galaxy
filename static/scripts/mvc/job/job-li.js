"use strict";define(["mvc/list/list-item","mvc/dataset/dataset-list","mvc/base-mvc","utils/localization"],function(t,a,e,i){var s=t.FoldoutListItemView,l=s.extend({className:s.prototype.className+" job",id:function(){return["job",this.model.get("id")].join("-")},foldoutPanelClass:a.DatasetList,initialize:function(t){t.logger&&(this.logger=this.model.logger=t.logger),this.log(this+".initialize:",t),s.prototype.initialize.call(this,t),this.tool=t.tool||{},this.jobData=t.jobData||{},this.linkTarget=t.linkTarget||"_blank"},_swapNewRender:function(t){return s.prototype._swapNewRender.call(this,t),this.model.has("state")&&this.$el.addClass("state-"+this.model.get("state")),this.$el},_getFoldoutPanelOptions:function(){var t=s.prototype._getFoldoutPanelOptions.call(this);return _.extend(t,{collection:this.model.outputCollection,selecting:!1})},_labelParamMap:function(){var t=this.model.get("params"),a={};return _.each(this.tool.inputs,function(e){e.label&&"DataToolParameter"!==e.model_class&&(a[e.label]=t[e.name])}),a},_labelInputMap:function(){var t=this,a={};return _.each(this.jobData.inputs,function(e){var i=t._findToolInput(e.name);i&&(a[i.label]=e)}),a},_findToolInput:function(t){var a=this.tool.inputs,e=_.findWhere(a,{name:t});return e||this._findRepeatToolInput(t,a)},_findRepeatToolInput:function(t,a){a=a||this.tool.inputs;var e=_.find(a,function(a){return 0===t.indexOf(a.name)});if(e)return _.find(e.inputs,function(a){return-1!==t.indexOf(a.name)})},toString:function(){return"JobListItemView("+this.model+")"}});return l.prototype.templates=function(){e.wrapTemplate(['<div class="list-element">','<div class="id"><%- model.id %></div>','<div class="warnings"></div>','<div class="selector">','<span class="fa fa-2x fa-square-o"></span>',"</div>",'<div class="primary-actions"></div>','<div class="title-bar"></div>','<div class="details"></div>',"</div>"]);var t=e.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<div class="title">','<span class="name"><%- view.tool.name %></span>',"</div>",'<div class="subtitle">','<span class="description"><%- view.tool.description %></span','<span class="create-time">'," ",i("Created"),": <%= new Date( job.create_time ).toString() %>, ","</span","</div>","</div>"],"job"),a=e.wrapTemplate(['<div class="subtitle">','<span class="description"><%- view.tool.description %></span',"</div>"],"job"),l=e.wrapTemplate(['<div class="details">','<div class="params">',"<% _.each( view._labelInputMap(), function( input, label ){ %>",'<div class="input" data-input-name="<%- input.name %>" data-input-id="<%- input.id %>">','<label class="prompt"><%- label %></label>','<span class="value"><%- input.content.name %></span>',"</div>","<% }) %>","<% _.each( view._labelParamMap(), function( param, label ){ %>",'<div class="param" data-input-name="<%- param.name %>">','<label class="prompt"><%- label %></label>','<span class="value"><%- param %></span>',"</div>","<% }) %>","</div>","</div>"],"job");return _.extend({},s.prototype.templates,{titleBar:t,subtitle:a,details:l})}(),{JobListItemView:l}});
//# sourceMappingURL=../../../maps/mvc/job/job-li.js.map
