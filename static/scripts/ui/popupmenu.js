"use strict";define(["jquery"],function(t){"use_strict";function e(t,e){var o=t.data("menu_options");t.data("menu_options",e),o||t.bind("click.show_popup",function(e){return n(".popmenu-wrapper").remove(),setTimeout(function(){var o=n("<ul class='dropdown-menu' id='"+t.attr("id")+"-menu'></ul>"),i=t.data("menu_options");_.size(i)<=0&&n("<li>No Options.</li>").appendTo(o),n.each(i,function(t,e){if(e){var i=e.action||e;o.append(n("<li></li>").append(n("<a>").attr("href",e.url).html(t).click(i)))}else o.append(n("<li></li>").addClass("head").append(n("<a href='#'></a>").html(t)))});var p=n("<div class='popmenu-wrapper' style='position: absolute;left: 0; top: -1000;'></div>").append(o).appendTo("body"),a=e.pageX-p.width()/2;a=Math.min(a,n(document).scrollLeft()+n(window).width()-n(p).width()-5),a=Math.max(a,n(document).scrollLeft()+5),p.css({top:e.pageY,left:a})},10),setTimeout(function(){var t=function(t){n(t).bind("click.close_popup",function(){n(".popmenu-wrapper").remove(),t.unbind("click.close_popup")})};t(n(window.document)),t(n(window.top.document));for(var e=window.top.frames.length;e--;)t(n(window.top.frames[e].document))},50),!1})}var n=t;return{make_popupmenu:e,make_popup_menus:function(t){t=t||document,n(t).find("div[popupmenu]").each(function(){var o={},i=n(this);i.find("a").each(function(){var t=n(this),e=t.get(0),i=e.getAttribute("confirm"),p=e.getAttribute("href"),a=e.getAttribute("target");o[t.text()]=p?{url:p,action:function(e){if(!i||confirm(i)){if(a)return window.open(p,a),!1;t.click()}else e.preventDefault()}}:null});var p=n(t).find("#"+i.attr("popupmenu"));p.find("a").bind("click",function(t){return t.stopPropagation(),!0}),e(p,o),p.addClass("popup"),i.remove()})}}});
//# sourceMappingURL=../../maps/ui/popupmenu.js.map
